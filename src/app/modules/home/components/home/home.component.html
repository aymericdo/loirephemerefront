<div nz-row [nzGutter]="[0, 24]">
  <div
    *ngFor="let pastry of pastries$ | async"
    nz-col
    nzXs="24"
    nzSm="24"
    nzMd="24"
    nzLg="12"
    nzXl="6"
  >
    <div class="inner-box">
      <app-card
        [title]="pastry.name"
        [description]="pastry.description"
        [imageUrl]="pastry.imageUrl"
        [count]="(selectedPastries$ | async)![pastry._id]"
        (onClickPlus)="handleClickPlus(pastry)"
        (onClickMinus)="handleClickMinus(pastry)"
      ></app-card>
    </div>
  </div>
</div>

<nz-modal
  [(nzVisible)]="isOpenTableModal"
  nzTitle="Veuillez indiquer votre table svp"
  nzCentered
  [nzClosable]="false"
  [nzMaskClosable]="true"
  (nzOnOk)="handleOkTableModal()"
>
  <ng-container *nzModalContent>
    <p>Regardez sur votre table, sous le QR Code apparait votre nom de table</p>
    <a nz-dropdown [nzDropdownMenu]="menu">
      {{ currentTable ? currentTable : "Votre table" }}
      <i nz-icon nzType="down"></i>
    </a>
    <nz-dropdown-menu #menu="nzDropdownMenu">
      <ul nz-menu nzSelectable>
        <li
          *ngFor="let table of tables"
          nz-menu-item
          (click)="currentTable = table"
        >
          {{ table }}
        </li>
      </ul>
    </nz-dropdown-menu>
  </ng-container>
  <ng-container *nzModalFooter>
    <button
      nz-button
      nzType="primary"
      (click)="handleOkTableModal()"
      [disabled]="!currentTable"
    >
      OK
    </button>
  </ng-container>
</nz-modal>

<app-order-footer
  *ngIf="hasSelectedPastries$ | async"
  (onClickReset)="handleClickReset()"
  (onClickCommand)="handleClickCommand($event)"
  [allPastries]="(pastries$ | async)!"
  [selectedPastries]="(selectedPastries$ | async)!"
  [totalPrice]="(totalPrice$ | async)!"
></app-order-footer>
